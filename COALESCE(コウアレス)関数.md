COALESCE(カラム名) : 与えられた引数(カラム)のうち、NULLではない最初の引数の値を返す。

COALESCE(カラム名1, カラム名2、デフォルト値) : 与えられた引数(カラム)のうち、NULLではない最初の引数(カラム)の値を返す。

例

customerテーブル

| 行 | id | name1 | name2 |
| --- | --- | --- | --- |
| 1 | 1 | 田中　明子 | null |
| 2 | 2 | 鈴木　誠也 | null |
| 3 | 3 | null | 斉藤　巧 |
| 4 | 4 | 杉田　大作 | 松本　人志 |
| 5 | 5 | null | null |

```php
SELECT
  id,
  COALESCE(name1,name2,'名無し') AS name
FROM
  customer;
```

このSQLを実行すると、

**「customerテーブルのname1カラムを見て、nullでないか確認。nullが入っているデータ(id)はname2カラムを確認。name1、name2ともにnullの場合は「名無し」を入れる。」**

のように処理が行われる。

結果として、次のような結果となる。

| 行 | id | name |
| --- | --- | --- |
| 1 | 1 | 田中　明子 |
| 2 | 2 | 鈴木　誠也 |
| 3 | 3 | 斉藤　巧 |
| 4 | 4 | 杉田　大作 |
| 5 | 5 | 名無し |
